<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Maven Interactive Tutorial by ezefarina</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Maven Interactive Tutorial</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/ezefarina/maven-training" class="btn">View on GitHub</a>
      <a href="https://github.com/ezefarina/maven-training/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/ezefarina/maven-training/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h3>
<a id="steps-reference" class="anchor" href="#steps-reference" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Steps reference</h3>

<ul>
<li>Step 1: <a href="#parent-creation">Parent creation</a>
</li>
<li>Step 2: <a href="#module-aggregation">Module aggregation</a>
</li>
<li>Step 3: <a href="#second-module-aggregation">Second module aggregation</a>
</li>
<li>Step 4: <a href="#centralized-dependencies-management-in-parent-pom">Centralized dependencies management in parent POM</a>
</li>
<li>Step 5: <a href="#multi-module-inherited-properties">Multi-module inherited properties</a>
</li>
<li>Step 6: <a href="#profiles-to-alter-a-lifecycle">Profiles to alter a lifecycle</a>
</li>
<li>Step 7: <a href="#plugin-basic-configuration">Plugin basic configuration</a>
</li>
<li>Step 8: <a href="#centralized-plugins-management-in-parent-pom">Centralized plugins management in parent POM</a>
</li>
<li>Step 9: <a href="#controlled-plugin-configuration-inheritance">Controlled plugin configuration inheritance</a>
</li>
</ul>

<h3>
<a id="parent-creation" class="anchor" href="#parent-creation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Parent creation</h3>

<p>Parent POM file is created with the following archetype</p>

<pre><code>mvn archetype:generate -DgroupId=com.ezefarina.maven -DartifactId=maven-training-base -DarchetypeGroupId=org.codehaus.mojo.archetypes -DarchetypeArtifactId=pom-root -DinteractiveMode=false
</code></pre>

<p>Defined the following elements:</p>

<ul>
<li>modelVersion: Defines the XSD version used for the XML validation of the current POM file</li>
<li>groupId: Package formatted name of the project or group of projects. eg. org.apache.maven</li>
<li>version: Version identifier for the pair groupId:artifactId

<ul>
<li>During packaging phase, it's used for naming the output file/s</li>
<li>During install phase, it's used for creating the path and putting the artifact in the local repository</li>
<li>During deploy phase, it's used for creating the path and putting the artifact in the remote repository</li>
</ul>
</li>
<li>packaging: Defines what is the build output artifact type. Core possible ones: pom, jar, maven-plugin, ejb, war, ear, rar, par</li>
<li>artifactId: Unique identifier for this artifact, under the defined groupId</li>
<li>name: Used as a short name or alias, for listing in IDE's and the developer's alternative name for this artifact</li>
</ul>

<p>For full POM reference you can check the <a href="http://maven.apache.org/ref/3.3.9/maven-model/maven.html">official specification</a></p>

<p>And <a href="https://gist.github.com/zbigniewTomczak/4235871">here</a> is a good list of available archetypes</p>

<h3>
<a id="module-aggregation" class="anchor" href="#module-aggregation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Module aggregation</h3>

<p>A child module is added, based on the following archetype</p>

<pre><code>mvn archetype:generate -DgroupId=com.ezefarina.maven -DartifactId=maven-training-base-module -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false
</code></pre>

<p>By running an artifact creation like this, standing over an existing pom location it will automatically add the new artifact as a child of it. In this case, the module added is a simple Java Main class with its default project structure.
This default structure is defined in the archetype itself and it contains the following components:</p>

<ul>
<li>Module folder</li>
<li>Java main class for standalone execution</li>
<li>Test class for the java class created</li>
<li>Own POM file</li>
<li>JUnit added as a default dependency</li>
<li>(conditional) Module added as a child if there's a POM to do so in the current location</li>
</ul>

<h3>
<a id="second-module-aggregation" class="anchor" href="#second-module-aggregation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Second module aggregation</h3>

<p>Another child module is added, using a web application archetype</p>

<pre><code>mvn archetype:generate -DgroupId=com.ezefarina.maven -DartifactId=maven-training-base-webapp -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false
</code></pre>

<p>This new module is added as well to the parent POM, but in this case the output structure is a bit different, as the archetype is different. We have an index.jsp, a web.xml, a resources folder, and some other elements that are common (or needed) for a really basic web application.</p>

<h3>
<a id="centralized-dependencies-management-in-parent-pom" class="anchor" href="#centralized-dependencies-management-in-parent-pom" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Centralized dependencies management in parent POM</h3>

<p>By doing so, we ensure that the utilization of the project dependencies are common to all its children, making it easier to see, manage and update them. This can be achieved by defining <em></em> section in the parent pom.
This tag means that all that it contains are not dependencies itself that are strictly going to be used (besides they are potentially going to be), but they are there to be parametrized for its children to be used. We define here, that the JUnit version is 3.8.1. We will not specify the version in the <em></em> version of the children as we want it to be handled by the parent only.
On the other side, we are not defining the scope on the parent, as the usage of the artifact may be different for each module. It can be done, but it depends on the case.</p>

<p>For further info about dependencies management, check the <a href="https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html">official doc here</a></p>

<h3>
<a id="multi-module-inherited-properties" class="anchor" href="#multi-module-inherited-properties" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Multi-module inherited properties</h3>

<p>By defining properties in the parent POM, they will be available for its childs. On the other side, if we define a property in a specific module it won't be available for its parent, as it only works downstream.
We can do this by defining the <em></em> section. Not necessarily have to be made in the parent, it just depends on the visibility you need for each of them.</p>

<h3>
<a id="profiles-to-alter-a-lifecycle" class="anchor" href="#profiles-to-alter-a-lifecycle" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Profiles to alter a lifecycle</h3>

<p>Configuring different profiles allow us to define different behaviours based on which profile is being requested. We could export a coverage report only for development, configure a different set of URLs or usernames for production, just as an example.
In this case, the <em>development</em> profile is enabled by default (it gets executed if you don't specify a profile), and a <em>production</em> role is off by default. The difference between them is that they will set the same property with a different value. The idea is to spit out the logs to the console on development, and to a file on production environment. So depending where are we going to send our build is which profile we will activate like this:</p>

<pre><code>mvn install -Pproduction
</code></pre>

<p>For further reference about the Lifecycle, Phases and goals check <a href="https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html">this article</a></p>

<p>Fur further info about check <a href="http://maven.apache.org/guides/introduction/introduction-to-profiles.html">this other one</a></p>

<h3>
<a id="plugin-basic-configuration" class="anchor" href="#plugin-basic-configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Plugin basic configuration</h3>

<p>You would need to configure a plugin when you need to attach a specific functionality to a specific phase. In this example, we are speficying which should be the name of the output WAR file on the webapp module. In this case the <em>maven-war-plugin</em> is the default plugin used for war packaging during <em>package</em> phase. In this case we are explicitly adding it to parametrize the final name this war will have (of course you are able to do a lot more than this, it's just a simple example).
Each plugin has a default phase defined, that it will be attached to if you don't define a different one.</p>

<h3>
<a id="centralized-plugins-management-in-parent-pom" class="anchor" href="#centralized-plugins-management-in-parent-pom" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Centralized plugins management in parent POM</h3>

<p>As well as you are able to centralize dependencies configuration on the parent POM in order to inherit these definitions and make them common to all the submodules, you can do just the same with the plugins. This will be more powerful than the dependencies inheritance, as a plugin has a lot of configurations that the dependencies doesn't.
In this example we are moving this config to the parent POM, and only inheriting it into the WebApp module. This is done by defining the <em></em> tag</p>

<p>This is the <a href="http://maven.apache.org/pom.html#Plugin_Management">official doc</a> about the plugin management functions</p>

<h3>
<a id="controlled-plugin-configuration-inheritance" class="anchor" href="#controlled-plugin-configuration-inheritance" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Controlled plugin configuration inheritance</h3>

<p>While working with pluginManagement, you can centralize a lot of configurations, but there would be the case where for a specific module you don't want to inherit the configurations as is (maybe this module has a particularity). In this case, you have the option to append, merge or override the configuration. This is the case of this example. We are overriding the incoming plugin configuration from the parent POM by setting the attribute <em>combine.self="override"</em></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/ezefarina/maven-training">Maven Interactive Tutorial</a> is maintained by <a href="https://github.com/ezefarina">ezefarina</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-74171106-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
