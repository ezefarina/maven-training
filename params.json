{"name":"Maven Interactive Tutorial","tagline":"","body":"# Maven Interactive Tutorial - Git based\r\n\r\n### Steps reference\r\n* Step 1: [Parent creation](#parent-creation)\r\n* Step 2: [Module aggregation](#module-aggregation)\r\n* Step 3: [Second module aggregation](#second-module-aggregation)\r\n* Step 4: [Centralized dependencies management in parent POM](#centralized-dependencies-management-in-parent-pom)\r\n* Step 5: [Multi-module inherited properties](#multi-module-inherited-properties)\r\n* Step 6: [Profiles to alter a lifecycle](#profiles-to-alter-a-lifecycle)\r\n* Step 7: [Plugin basic configuration](#plugin-basic-configuration)\r\n* Step 8: [Centralized plugins management in parent POM](#centralized-plugins-management-in-parent-pom)\r\n* Step 9: [Controlled plugin configuration inheritance](#controlled-plugin-configuration-inheritance)\r\n\r\n### Parent creation\r\nParent POM file is created with the following archetype\r\n```\r\nmvn archetype:generate -DgroupId=com.ezefarina.maven -DartifactId=maven-training-base -DarchetypeGroupId=org.codehaus.mojo.archetypes -DarchetypeArtifactId=pom-root -DinteractiveMode=false\r\n```\r\nDefined the following elements:\r\n* modelVersion: Defines the XSD version used for the XML validation of the current POM file\r\n* groupId: Package formatted name of the project or group of projects. eg. org.apache.maven\r\n* version: Version identifier for the pair groupId:artifactId\r\n    - During packaging phase, it's used for naming the output file/s\r\n    - During install phase, it's used for creating the path and putting the artifact in the local repository\r\n    - During deploy phase, it's used for creating the path and putting the artifact in the remote repository\r\n* packaging: Defines what is the build output artifact type. Core possible ones: pom, jar, maven-plugin, ejb, war, ear, rar, par\r\n* artifactId: Unique identifier for this artifact, under the defined groupId\r\n* name: Used as a short name or alias, for listing in IDE's and the developer's alternative name for this artifact\r\n\r\nFor full POM reference you can check the [official specification](http://maven.apache.org/ref/3.3.9/maven-model/maven.html)\r\n\r\nAnd [here](https://gist.github.com/zbigniewTomczak/4235871) is a good list of available archetypes\r\n\r\n### Module aggregation\r\nA child module is added, based on the following archetype\r\n```\r\nmvn archetype:generate -DgroupId=com.ezefarina.maven -DartifactId=maven-training-base-module -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false\r\n```\r\nBy running an artifact creation like this, standing over an existing pom location it will automatically add the new artifact as a child of it. In this case, the module added is a simple Java Main class with its default project structure.\r\nThis default structure is defined in the archetype itself and it contains the following components:\r\n* Module folder\r\n* Java main class for standalone execution\r\n* Test class for the java class created\r\n* Own POM file\r\n* JUnit added as a default dependency\r\n* (conditional) Module added as a child if there's a POM to do so in the current location\r\n\r\n### Second module aggregation\r\nAnother child module is added, using a web application archetype\r\n```\r\nmvn archetype:generate -DgroupId=com.ezefarina.maven -DartifactId=maven-training-base-webapp -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false\r\n```\r\nThis new module is added as well to the parent POM, but in this case the output structure is a bit different, as the archetype is different. We have an index.jsp, a web.xml, a resources folder, and some other elements that are common (or needed) for a really basic web application.\r\n\r\n### Centralized dependencies management in parent POM\r\nBy doing so, we ensure that the utilization of the project dependencies are common to all its children, making it easier to see, manage and update them. This can be achieved by defining *<dependencyManagement>* section in the parent pom.\r\nThis tag means that all that it contains are not dependencies itself that are strictly going to be used (besides they are potentially going to be), but they are there to be parametrized for its children to be used. We define here, that the JUnit version is 3.8.1. We will not specify the version in the *<dependencies>* version of the children as we want it to be handled by the parent only.\r\nOn the other side, we are not defining the scope on the parent, as the usage of the artifact may be different for each module. It can be done, but it depends on the case.\r\n\r\nFor further info about dependencies management, check the [official doc here](https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)\r\n\r\n### Multi-module inherited properties\r\nBy defining properties in the parent POM, they will be available for its childs. On the other side, if we define a property in a specific module it won't be available for its parent, as it only works downstream.\r\nWe can do this by defining the *<properties>* section. Not necessarily have to be made in the parent, it just depends on the visibility you need for each of them.\r\n\r\n### Profiles to alter a lifecycle\r\nConfiguring different profiles allow us to define different behaviours based on which profile is being requested. We could export a coverage report only for development, configure a different set of URLs or usernames for production, just as an example.\r\nIn this case, the *development* profile is enabled by default (it gets executed if you don't specify a profile), and a *production* role is off by default. The difference between them is that they will set the same property with a different value. The idea is to spit out the logs to the console on development, and to a file on production environment. So depending where are we going to send our build is which profile we will activate like this:\r\n```\r\nmvn install -Pproduction\r\n```\r\nFor further reference about the Lifecycle, Phases and goals check [this article](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)\r\n\r\nFur further info about check [this other one](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)\r\n\r\n### Plugin basic configuration\r\nYou would need to configure a plugin when you need to attach a specific functionality to a specific phase. In this example, we are speficying which should be the name of the output WAR file on the webapp module. In this case the *maven-war-plugin* is the default plugin used for war packaging during *package* phase. In this case we are explicitly adding it to parametrize the final name this war will have (of course you are able to do a lot more than this, it's just a simple example).\r\nEach plugin has a default phase defined, that it will be attached to if you don't define a different one.\r\n\r\n### Centralized plugins management in parent POM\r\nAs well as you are able to centralize dependencies configuration on the parent POM in order to inherit these definitions and make them common to all the submodules, you can do just the same with the plugins. This will be more powerful than the dependencies inheritance, as a plugin has a lot of configurations that the dependencies doesn't.\r\nIn this example we are moving this config to the parent POM, and only inheriting it into the WebApp module. This is done by defining the *<pluginManagement>* tag\r\n\r\nThis is the [official doc](http://maven.apache.org/pom.html#Plugin_Management) about the plugin management functions\r\n\r\n### Controlled plugin configuration inheritance\r\nWhile working with pluginManagement, you can centralize a lot of configurations, but there would be the case where for a specific module you don't want to inherit the configurations as is (maybe this module has a particularity). In this case, you have the option to append, merge or override the configuration. This is the case of this example. We are overriding the incoming plugin configuration from the parent POM by setting the attribute *combine.self=\"override\"*\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}